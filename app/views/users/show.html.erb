<section class="h-100 gradient-custom-2">

    <div class="container py-5 h-100; border-radius: 10px;">
        <div class="row d-flex justify-content-center">
            <div class="col col-lg-9 col-xl-8">
                <div class="card shadow-lg">
                    <div class="rounded-top text-white d-flex flex-row justify-content-center align-items-center" style="background-color: #F2E3BF; height: auto;">
                    </div>

                    <!-- Section About avec photo -->
                    <div class="text-center p-4 mb-4" style="background-color: #F2E3BF; border-radius: 0 0 10px 10px;">
                        <!-- Image de profil centrée -->
                        <%= image_tag "https://picsum.photos/seed/#{current_user.id}/150",
                        alt: "Profile Image",
                        class: "img-fluid img-thumbnail rounded-circle border",
                        style: "width: 120px; margin-top: -60px; background-color: white; padding: 5px; " %>

                        <!-- Infos utilisateur -->
                        <p class="lead fw-normal mt-3">About</p>
                        <div class="font-italic">
                            <p><%= current_user.email %></p>
                            <p>Member since: <%= current_user.created_at.strftime("%B %Y") %></p>
                        </div>

                        <!-- Bouton modifier -->
                        <div class="mt-3">
                            <%= link_to "Modify profile", edit_user_registration_path, class: "btn-custom basic" %>
                        </div>
                    </div>

                    <div class="text-left p-4 mb-4" style="background-color:rgb(255, 255, 255); border-radius: 0 0 10px 10px;">
                    <h5>Commandes passées</h5>

                    <% @orders.each do |order| %>
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Commande # <%= order.id %></h5>
                            <h6>Date de la commande : <%= order.created_at.strftime("%d/%m/%Y") %></h6>
                            <p class="order-status <%= order.status.downcase.tr(' ', '-') %>">
                                Statut de la commande : <%= order.status %></p>
                        </div>

                        <div class="card-body">
                            <!-- Statut de la commande avec couleur -->

                            <div class="row">
                                <% order.order_items.each do |order_item| %>
                                <div class="col-6 col-md-4 col-lg-3 mb-4">
                                    <div class="card">
                                        <%= image_tag order_item.item.image, class: "card-img-top", alt: "Image commande" %>
                                        <div class="card-body">
                                            <p class="cart-text">Produit: <%= order_item.item.title %></p>
                                            <p class="cart-text">Quantité: <%= order_item.quantity %></p>
                                        </div>
                                    </div>
                                </div>
                                <% end %>
                            </div>

                            <!-- Boutons pour éditer et voir la commande -->
                            <div class="mt-3 mb-2">

                                <%= link_to 'Voir la commande', order_path(order), class: 'btn-custom basic ' %>
                            </div>
                        </div>
                    </div>
                    <% end %>

                </div>
            </div>
        </div>
    </div>
    </div>
</section>